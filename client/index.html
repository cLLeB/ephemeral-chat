<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#1f2937" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="EphChat" />
  <meta name="description"
    content="Create anonymous, temporary chat rooms with real-time messaging. No registration required." />

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json" />

  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" href="/pwa-192x192.png" />
  <link rel="apple-touch-startup-image" href="/pwa-512x512.png" />

  <style>
    /* Premium Splash Screen Styles */
    #splash-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(to bottom right, #f8fafc, #eef2ff);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease-out, visibility 0.5s;
    }

    .dark #splash-screen {
      background: linear-gradient(to bottom right, #111827, #1f2937);
    }

    .splash-content {
      text-align: center;
      animation: fadeIn 0.8s ease-out;
    }

    .splash-logo {
      color: #4f46e5;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .dark .splash-logo {
      color: #818cf8;
    }

    .splash-title {
      font-size: 2.25rem;
      font-weight: 800;
      color: #111827;
      margin-bottom: 0.5rem;
      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    .dark .splash-title {
      color: white;
    }

    .splash-subtitle {
      color: #64748b;
      font-size: 1.125rem;
      max-width: 20rem;
      margin: 0 auto 2rem;
    }

    .splash-button-skeleton {
      width: 12rem;
      height: 3rem;
      background: #4f46e5;
      border-radius: 0.5rem;
      margin: 0 auto;
      opacity: 0.7;
    }

    .splash-loader {
      width: 40px;
      height: 40px;
      border: 3px solid #e2e8f0;
      border-top-color: #4f46e5;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 2rem auto 0;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Hide splash when app is loaded */
    body.app-loaded #splash-screen {
      opacity: 0;
      visibility: hidden;
    }
  </style>
  <script>
    // Theme detection for splash screen
    if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  </script>
  <title>Ephemeral Chat - Anonymous, Temporary Chat Rooms</title>
</head>

<body>
  <div id="splash-screen">
    <div class="splash-content">
      <div class="splash-logo">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
      </div>
      <h1 class="splash-title">Ephemeral Chat</h1>
      <p class="splash-subtitle">Secure, Temporary Chat Rooms. Loading your privacy...</p>
      <div class="splash-button-skeleton"></div>
      <div class="splash-loader"></div>
    </div>
  </div>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
  <script>
    // Register service worker
    if ('serviceWorker' in navigator && window.location.hostname !== 'localhost') {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('ServiceWorker registration successful');
          })
          .catch(error => {
            console.log('ServiceWorker registration failed');
          });
      });
    }

    // Signal app is ready (this will be called from main.jsx)
    window.addEventListener('app-ready', () => {
      document.body.classList.add('app-loaded');
    });
  </script>
</body>

</html>